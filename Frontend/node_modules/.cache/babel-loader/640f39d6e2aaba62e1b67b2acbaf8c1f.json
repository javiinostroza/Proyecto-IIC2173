{"ast":null,"code":"var _jsxFileName = \"/home/elias/Desktop/u/arqsis/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/LogIn/LogIn.jsx\";\nimport React, { useState } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport { url_login } from \"../Routes\";\nimport '../general.css';\n\nconst LogIn = () => {\n  const history = useHistory();\n  const [name, setName] = useState('');\n  const [userId, setUserId] = useState('');\n\n  const handleLoginClick = event => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    var urlencoded = new URLSearchParams();\n    urlencoded.append(\"username\", name);\n    console.log(myHeaders);\n    let requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: urlencoded,\n      redirect: 'follow'\n    };\n    event.preventDefault();\n    fetch(url_login, requestOptions).then(response => {\n      //const token = response.headers.get('Authorization');\n      return response.json().then(data => {\n        console.log(\"Data\", data.user.username);\n\n        if (data.user.username === undefined) {\n          alert(\"User not found\");\n        } else {\n          const token = data.jwt;\n          setName(data.user.username);\n          setUserId(data.user.id);\n          window.localStorage.setItem('token', token);\n          console.log(\"Token\", window.localStorage.getItem('token'));\n          history.push('/');\n        }\n\n        return data;\n      });\n    }).catch(err => {\n      console.log(\"Error\");\n      console.log(err);\n    });\n  };\n\n  window.localStorage.setItem('userId', userId);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Full',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Console',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Inputs',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, \" Log In \"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"JoinInput\",\n    placeholder: \"Name\",\n    type: \"text\",\n    onChange: event => setName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 26\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleLoginClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \" Log In\"))));\n};\n\nexport default LogIn;","map":{"version":3,"sources":["/home/elias/Desktop/u/arqsis/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/LogIn/LogIn.jsx"],"names":["React","useState","useHistory","url_login","LogIn","history","name","setName","userId","setUserId","handleLoginClick","event","myHeaders","Headers","append","urlencoded","URLSearchParams","console","log","requestOptions","method","headers","body","redirect","preventDefault","fetch","then","response","json","data","user","username","undefined","alert","token","jwt","id","window","localStorage","setItem","getItem","push","catch","err","target","value"],"mappings":"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","sourcesContent":["import React, { useState }from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport {url_login} from \"../Routes\"\n\nimport '../general.css'\n\nconst LogIn = () => {\n    const history = useHistory();\n    const [name, setName] = useState('');\n    const [userId, setUserId] = useState('');\n\n    const handleLoginClick = (event) => {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"username\", name);\n        console.log(myHeaders);\n\n        let requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: urlencoded,\n            redirect: 'follow'\n        };\n        \n        event.preventDefault();\n        fetch(url_login, requestOptions)\n            .then( (response) => {\n                //const token = response.headers.get('Authorization');\n                return response.json()\n                .then((data) => {\n                    console.log(\"Data\", data.user.username);\n                    if(data.user.username === undefined){\n                        alert(\"User not found\")\n                    }else{\n                        const token = data.jwt;\n                        setName(data.user.username);\n                        setUserId(data.user.id);\n                        window.localStorage.setItem('token', token);\n                        console.log(\"Token\", window.localStorage.getItem('token'));\n                        history.push('/');\n                        }\n                    return data;\n                    })\n            })\n            .catch((err) => {\n                console.log(\"Error\");\n                console.log(err);\n            });   \n    }\n\n    window.localStorage.setItem('userId', userId);\n\n    return (\n        <div className={'Full'}>\n            <div className={'Console'}>\n                <div className={'Inputs'}>\n                    <h1> Log In </h1>\n                    <div><input className='JoinInput' placeholder = \"Name\" type =\"text\" onChange={(event) => setName(event.target.value)}/></div>\n                    <button type=\"submit\" onClick={handleLoginClick}> Log In</button>\n                </div>\n            </div>\n        </div>\n\n    ) \n}\n\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}
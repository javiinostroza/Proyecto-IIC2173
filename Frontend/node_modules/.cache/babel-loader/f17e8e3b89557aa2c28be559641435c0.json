{"ast":null,"code":"var _jsxFileName = \"/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Monitoring/Monitoring.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { url_get_monitoring } from \"./../Routes\";\nimport '../general.css';\n\nconst Monitoring = () => {\n  const [image, setImage] = useState('');\n  const [fullString, setFullString] = useState('');\n  const [accessToken, setAccessToken] = useState('');\n  const [imageLink, setImageLink] = useState('');\n  useEffect(() => {\n    const getToken = async () => {\n      var myHeaders = new Headers();\n      myHeaders.append(\"content-type\", \"application/x-www-form-urlencoded\");\n      myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n      var urlencoded = new URLSearchParams();\n      urlencoded.append(\"grant_type\", \"client_credentials\");\n      urlencoded.append(\"client_id\", \"PZPWHSA4HEWEX470bJCptAwLtbqAprTL\");\n      urlencoded.append(\"client_secret\", \"UsrbdXmXiATreBRyreIG2bWc5x2JB80RBsUYg34z1PWdm8_11K9VqD8VlBs3yrli\");\n      urlencoded.append(\"audience\", \"https://dev-3qxptrmu.us.auth0.com/api/v2/\");\n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: 'follow'\n      };\n      fetch(\"https://dev-3qxptrmu.us.auth0.com/oauth/token\", requestOptions).then(response => response.json()).then(result => {\n        let token = 'Bearer ' + result.access_token;\n        setAccessToken(token);\n      }).catch(error => console.log('error', error));\n    };\n\n    getToken();\n    console.log(\"HACEMOS REQUEST DE LA IMAGEN\");\n    var requestOptions = {\n      method: 'GET',\n      redirect: 'follow'\n    };\n    fetch(\"http://localhost:3000/monitoring\", requestOptions).then(response => response.text()).then(result => {\n      setImage(result);\n      let link = \"data:image/png;base64,\";\n      setImageLink(link + image);\n    }).catch(error => console.log('error', error));\n  }, []);\n  console.log(\"image link hook: \", imageLink);\n  return /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"Red dot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  });\n};\n\nexport default Monitoring;","map":{"version":3,"sources":["/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Monitoring/Monitoring.js"],"names":["React","useState","useEffect","useHistory","queryString","url_get_monitoring","Monitoring","image","setImage","fullString","setFullString","accessToken","setAccessToken","imageLink","setImageLink","getToken","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","body","redirect","fetch","then","response","json","result","token","access_token","catch","error","console","log","text","link"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,SAASC,kBAAT,QAAmC,aAAnC;AAEA,OAAO,gBAAP;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAErB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACY,SAAD,EAAYC,YAAZ,IAA4Bb,QAAQ,CAAC,EAAD,CAA1C;AAGAC,EAAAA,SAAS,CAAC,MAAM;AAEZ,UAAMa,QAAQ,GAAG,YAAY;AAEzB,UAAIC,SAAS,GAAG,IAAIC,OAAJ,EAAhB;AACAD,MAAAA,SAAS,CAACE,MAAV,CAAiB,cAAjB,EAAiC,mCAAjC;AACAF,MAAAA,SAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2B,+PAA3B;AAEA,UAAIC,UAAU,GAAG,IAAIC,eAAJ,EAAjB;AACAD,MAAAA,UAAU,CAACD,MAAX,CAAkB,YAAlB,EAAgC,oBAAhC;AACAC,MAAAA,UAAU,CAACD,MAAX,CAAkB,WAAlB,EAA+B,kCAA/B;AACAC,MAAAA,UAAU,CAACD,MAAX,CAAkB,eAAlB,EAAmC,kEAAnC;AACAC,MAAAA,UAAU,CAACD,MAAX,CAAkB,UAAlB,EAA8B,2CAA9B;AAEA,UAAIG,cAAc,GAAG;AACrBC,QAAAA,MAAM,EAAE,MADa;AAErBC,QAAAA,OAAO,EAAEP,SAFY;AAGrBQ,QAAAA,IAAI,EAAEL,UAHe;AAIrBM,QAAAA,QAAQ,EAAE;AAJW,OAArB;AAMAC,MAAAA,KAAK,CAAC,+CAAD,EAAkDL,cAAlD,CAAL,CACCM,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEOG,MAAD,IAAY;AACd,YAAIC,KAAK,GAAG,YAAYD,MAAM,CAACE,YAA/B;AACApB,QAAAA,cAAc,CAACmB,KAAD,CAAd;AAEH,OAND,EAOCE,KAPD,CAOOC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB,CAPhB;AAQH,KA1BD;;AA2BAnB,IAAAA,QAAQ;AAGRoB,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AAGA,QAAIf,cAAc,GAAG;AACjBC,MAAAA,MAAM,EAAE,KADS;AAEjBG,MAAAA,QAAQ,EAAE;AAFO,KAArB;AAKAC,IAAAA,KAAK,CAAC,kCAAD,EAAqCL,cAArC,CAAL,CACKM,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACS,IAAT,EADtB,EAEKV,IAFL,CAEWG,MAAD,IAAY;AACdtB,MAAAA,QAAQ,CAACsB,MAAD,CAAR;AACA,UAAIQ,IAAI,GAAG,wBAAX;AACAxB,MAAAA,YAAY,CAACwB,IAAI,GAAG/B,KAAR,CAAZ;AACH,KANL,EAOK0B,KAPL,CAOWC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB,CAPpB;AASH,GAjDQ,EAiDN,EAjDM,CAAT;AAmDAC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCvB,SAAjC;AAIA,sBACI;AAAK,IAAA,GAAG,EAAEN,KAAV;AAAiB,IAAA,GAAG,EAAC,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAIH,CAnED;;AAuEA,eAAeD,UAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { url_get_monitoring } from \"./../Routes\";\n\nimport '../general.css'\n\nconst Monitoring = () => {\n    \n    const [image, setImage] = useState('')\n    const [fullString, setFullString] = useState('')\n    const [accessToken, setAccessToken] = useState(''); \n    const [imageLink, setImageLink] = useState('');\n\n\n    useEffect(() => {\n\n        const getToken = async () => {\n            \n            var myHeaders = new Headers();\n            myHeaders.append(\"content-type\", \"application/x-www-form-urlencoded\");\n            myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n\n            var urlencoded = new URLSearchParams();\n            urlencoded.append(\"grant_type\", \"client_credentials\");\n            urlencoded.append(\"client_id\", \"PZPWHSA4HEWEX470bJCptAwLtbqAprTL\");\n            urlencoded.append(\"client_secret\", \"UsrbdXmXiATreBRyreIG2bWc5x2JB80RBsUYg34z1PWdm8_11K9VqD8VlBs3yrli\");\n            urlencoded.append(\"audience\", \"https://dev-3qxptrmu.us.auth0.com/api/v2/\");\n\n            var requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: urlencoded,\n            redirect: 'follow'\n            };\n            fetch(\"https://dev-3qxptrmu.us.auth0.com/oauth/token\", requestOptions)\n            .then(response => response.json())\n            .then((result) => {\n                let token = 'Bearer ' + result.access_token;\n                setAccessToken(token);\n\n            })\n            .catch(error => console.log('error', error));\n        }\n        getToken();\n\n\n        console.log(\"HACEMOS REQUEST DE LA IMAGEN\")\n        \n\n        var requestOptions = {\n            method: 'GET',\n            redirect: 'follow'\n        };\n          \n        fetch(\"http://localhost:3000/monitoring\", requestOptions)\n            .then(response => response.text())\n            .then((result) => {\n                setImage(result)\n                let link = \"data:image/png;base64,\"\n                setImageLink(link + image)\n            })\n            .catch(error => console.log('error', error));\n\n    }, [])\n\n    console.log(\"image link hook: \", imageLink)\n    \n\n\n    return (\n        <img src={image} alt=\"Red dot\" />\n\n    )\n}\n\n\n\nexport default Monitoring"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Users/Users.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { url_add_room, url_rooms, url_auth, url_named_user } from \"./../Routes\";\nimport User from '../User/User';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport '../general.css';\n\nconst Users = () => {\n  const history = useHistory();\n  const [users, setUsers] = useState([]);\n  const [accessToken, setAccessToken] = useState('');\n  const [name, setName] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const {\n    logout\n  } = useAuth0();\n\n  const axios = require('axios').default;\n\n  const queryString = require('query-string');\n\n  useEffect(() => {\n    const getToken = async () => {\n      console.log(\"ENTRA AL GET TOKEN\");\n      var myHeaders = new Headers();\n      myHeaders.append(\"content-type\", \"application/x-www-form-urlencoded\");\n      myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n      var urlencoded = new URLSearchParams();\n      urlencoded.append(\"grant_type\", \"client_credentials\");\n      urlencoded.append(\"client_id\", \"PZPWHSA4HEWEX470bJCptAwLtbqAprTL\");\n      urlencoded.append(\"client_secret\", \"UsrbdXmXiATreBRyreIG2bWc5x2JB80RBsUYg34z1PWdm8_11K9VqD8VlBs3yrli\");\n      urlencoded.append(\"audience\", \"https://dev-3qxptrmu.us.auth0.com/api/v2/\");\n      var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: 'follow'\n      };\n      fetch(\"https://dev-3qxptrmu.us.auth0.com/oauth/token\", requestOptions).then(response => response.json()).then(result => {\n        let token = 'Bearer ' + result.access_token;\n        setAccessToken(token);\n        getUsers(token);\n      }).catch(error => console.log('error', error));\n    };\n\n    getToken();\n\n    const getUsers = async _token => {\n      var myHeaders = new Headers();\n      myHeaders.append(\"Authorization\", _token);\n      myHeaders.append(\"Cookie\", \"__cfduid=ddf00fd39ef65870898d0cec7953765f41604810630\");\n      var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n      };\n      fetch(\"https://dev-3qxptrmu.us.auth0.com/api/v2/users\", requestOptions).then(response => response.text()).then(result => {\n        let jsonResult = JSON.parse(result);\n        console.log(\"result typem: \", typeof result);\n        console.log(\"json result type: \", typeof jsonResult);\n        console.log(\"IMPORTANNTISIMO: \", jsonResult);\n        setUsers(jsonResult);\n      }).catch(error => console.log('error', error));\n    };\n  }, []);\n\n  const handleAdminPanel = () => {\n    history.push('/admin');\n  };\n\n  const handleEnterProfile = event => {\n    event.preventDefault();\n    const data = event.target.value.split(' | ');\n    let userId = data[0].split(':')[1];\n    let email = data[1].split(':')[1];\n    let username = data[2].split(':')[1];\n    let admin = data[3].split(':')[1];\n    console.log(userId);\n    console.log(username);\n    history.push(`/profile?userId=${userId}&username=${username}&admin=${admin}&email=${email}`);\n  };\n\n  const handleRegisterClick = () => {\n    const params = {\n      username: name,\n      password: password,\n      email: email\n    };\n    var requestOptions = {\n      method: 'POST',\n      redirect: 'follow',\n      body: JSON.stringify(params)\n    };\n    const url_ = url_named_user;\n    fetch(url_, requestOptions).then(response => {\n      return response.json();\n    }).catch(err => {\n      console.log(err);\n    });\n    window.location.reload();\n  }; // var sepData = data.split(\".\")\n  // const chatId = sepData[0]\n  // const chatName = sepData[1]\n  // history.push(`/chat?name=${chatName}&room=${chatId}`);\n  // window.location.reload();\n  // const handleSubmitNewRoom = (event) => { \n  //     var NewRoomHeader = new Headers();\n  //     const requestOptionsAddRoom = {\n  //         method: 'POST',\n  //         headers: NewRoomHeader,\n  //         redirect: 'follow'\n  //     };\n  //     event.preventDefault();\n  //     const url_ = url_add_room + newRoomName\n  //     fetch(url_, requestOptionsAddRoom)\n  //         .then(response => response.text())\n  //         .catch(error => console.log('error', error));\n  //     window.location.reload();\n  // }\n\n\n  const handleLogOutClick = () => {\n    window.localStorage.removeItem('userId');\n    logout({\n      returnTo: url_auth\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"Full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"Console\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Bar',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleAdminPanel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 26\n    }\n  }, \"Back to Admin Panel\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Right',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleLogOutClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 26\n    }\n  }, \" Log Out\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 26\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, \"Users\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"user-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(User, {\n    users: users,\n    handleEnterProfile: handleEnterProfile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, \"New User\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"JoinInput\",\n    placeholder: \"Name\",\n    type: \"text\",\n    onChange: event => setName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"JoinInput\",\n    placeholder: \"Email\",\n    type: \"text\",\n    onChange: event => setEmail(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"JoinInput\",\n    placeholder: \"Password\",\n    type: \"password\",\n    onChange: event => setPassword(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleRegisterClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, \"Create\")));\n};\n\nexport default Users;","map":{"version":3,"sources":["/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Users/Users.jsx"],"names":["React","useState","useEffect","useHistory","url_add_room","url_rooms","url_auth","url_named_user","User","useAuth0","Users","history","users","setUsers","accessToken","setAccessToken","name","setName","password","setPassword","email","setEmail","logout","axios","require","default","queryString","getToken","console","log","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","body","redirect","fetch","then","response","json","result","token","access_token","getUsers","catch","error","_token","text","jsonResult","JSON","parse","handleAdminPanel","push","handleEnterProfile","event","preventDefault","data","target","value","split","userId","username","admin","handleRegisterClick","params","stringify","url_","err","window","location","reload","handleLogOutClick","localStorage","removeItem","returnTo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { url_add_room, url_rooms, url_auth, url_named_user} from \"./../Routes\"\nimport User from '../User/User';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport '../general.css'\n\nconst Users = () => {\n    const history = useHistory();\n    const [users, setUsers] = useState([]);\n    const [accessToken, setAccessToken] = useState(''); \n    const [name, setName] = useState('');\n    const [password, setPassword] = useState('');\n    const [email, setEmail] = useState('');\n    const { logout } = useAuth0();\n    const axios = require('axios').default;\n    const queryString = require('query-string');\n    useEffect(() => {\n        const getToken = async () => {\n            console.log(\"ENTRA AL GET TOKEN\")\n            \n            var myHeaders = new Headers();\n            myHeaders.append(\"content-type\", \"application/x-www-form-urlencoded\");\n            myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n\n            var urlencoded = new URLSearchParams();\n            urlencoded.append(\"grant_type\", \"client_credentials\");\n            urlencoded.append(\"client_id\", \"PZPWHSA4HEWEX470bJCptAwLtbqAprTL\");\n            urlencoded.append(\"client_secret\", \"UsrbdXmXiATreBRyreIG2bWc5x2JB80RBsUYg34z1PWdm8_11K9VqD8VlBs3yrli\");\n            urlencoded.append(\"audience\", \"https://dev-3qxptrmu.us.auth0.com/api/v2/\");\n\n            var requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: urlencoded,\n            redirect: 'follow'\n            };\n            fetch(\"https://dev-3qxptrmu.us.auth0.com/oauth/token\", requestOptions)\n            .then(response => response.json())\n            .then((result) => {\n                let token = 'Bearer ' + result.access_token;\n                setAccessToken(token);\n                getUsers(token);\n\n            })\n            .catch(error => console.log('error', error));\n        }\n        getToken();\n\n        const getUsers = async (_token) =>{\n            var myHeaders = new Headers();\n            myHeaders.append(\"Authorization\", _token);\n            myHeaders.append(\"Cookie\", \"__cfduid=ddf00fd39ef65870898d0cec7953765f41604810630\");\n\n            var requestOptions = {\n            method: 'GET',\n            headers: myHeaders,\n            redirect: 'follow'\n            };\n\n            fetch(\"https://dev-3qxptrmu.us.auth0.com/api/v2/users\", requestOptions)\n                .then(response => response.text())\n                .then((result) => {\n                    let jsonResult = JSON.parse(result);\n                    console.log(\"result typem: \", typeof(result));\n                    console.log(\"json result type: \", typeof(jsonResult));\n                    console.log(\"IMPORTANNTISIMO: \", jsonResult);\n                    setUsers(jsonResult)\n                })\n                .catch(error => console.log('error', error));\n        }\n        \n        \n    },[]);\n\n    const handleAdminPanel = () => {\n        history.push('/admin')        \n\n    }\n\n    const handleEnterProfile = (event) => {\n        event.preventDefault();\n        const data = event.target.value.split(' | ');\n        let userId = data[0].split(':')[1];\n        let email = data[1].split(':')[1];\n        let username = data[2].split(':')[1];\n        let admin = data[3].split(':')[1];\n        console.log(userId);\n        console.log(username);\n        history.push(`/profile?userId=${userId}&username=${username}&admin=${admin}&email=${email}`)\n\n    }\n    const handleRegisterClick = () => {\n\n        const params = {\n            username: name,\n            password: password,\n            email: email,\n        };\n    \n        var requestOptions = {\n            method: 'POST',\n            redirect: 'follow',\n            body: JSON.stringify(params)\n        } \n        const url_ = url_named_user\n        fetch(url_, requestOptions)\n            .then( (response) => {\n                return response.json()\n                \n            })\n            .catch((err) => {\n                console.log(err);\n            });\n        window.location.reload();\n    }\n        \n        // var sepData = data.split(\".\")\n        // const chatId = sepData[0]\n        // const chatName = sepData[1]\n        // history.push(`/chat?name=${chatName}&room=${chatId}`);\n        // window.location.reload();\n    \n\n    // const handleSubmitNewRoom = (event) => { \n    //     var NewRoomHeader = new Headers();\n    //     const requestOptionsAddRoom = {\n    //         method: 'POST',\n    //         headers: NewRoomHeader,\n    //         redirect: 'follow'\n    //     };\n    //     event.preventDefault();\n    //     const url_ = url_add_room + newRoomName\n    //     fetch(url_, requestOptionsAddRoom)\n    //         .then(response => response.text())\n    //         .catch(error => console.log('error', error));\n    //     window.location.reload();\n    // }\n\n \n\n    const handleLogOutClick = () => {\n        window.localStorage.removeItem('userId');\n        logout({ returnTo: url_auth })\n    }\n\n    return (\n        <div class=\"Full\">\n            <div class=\"Console\">\n            <div className={'Bar'}>\n                <div className={'Left'}>\n                    <div><button type=\"submit\" onClick={handleAdminPanel}>Back to Admin Panel</button></div>\n                </div>\n                <div className={'Right'}>\n                    <h3> <button type=\"submit\" onClick={handleLogOutClick}> Log Out</button></h3>\n                </div>\n            </div>\n                <br></br>\n                <br></br><br></br>\n                <h3>Users</h3>\n                <br></br> \n                <div id=\"user-list\">\n                    <User users={users} handleEnterProfile={handleEnterProfile}/>                \n                </div>\n                <br></br>\n                <h3>New User</h3>\n                <br></br>\n                <div>\n                    <input className='JoinInput' placeholder = \"Name\" type =\"text\" onChange={(event) => setName(event.target.value)}/>\n                    <input className='JoinInput' placeholder = \"Email\" type =\"text\" onChange={(event) => setEmail(event.target.value)}/>\n                    <input className='JoinInput' placeholder = \"Password\" type =\"password\" onChange={(event) => setPassword(event.target.value)}/>\n                    </div>\n                    <button type=\"submit\" onClick={handleRegisterClick}>Create</button>\n\n            </div>\n        </div>\n        )\n}\n\nexport default Users;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Profile/Profile.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport queryString from 'query-string';\nimport { url_display_chat, url_send_message } from \"./../Routes\";\nimport '../Chat/Chat.css';\nimport '../general.css';\nimport InfoBar from '../InfoBar/InfoBar';\nimport Input from '../Input/Input';\n\nconst Profile = ({\n  location\n}) => {\n  const history = useHistory();\n  const [_email, setEmail] = useState('');\n  const [_userName, setUsername] = useState('');\n  const [id, setId] = useState('');\n  const [isAdmin, setIsAdmin] = useState('');\n  const [oldEmail, setOldEmail] = useState('');\n  const [oldUserName, setOldUsername] = useState('');\n  const [oldIsAdmin, setOldIsAdmin] = useState('');\n  const ENDPOINT = 'ec2-18-219-25-136.us-east-2.compute.amazonaws.com:5000';\n  useEffect(() => {\n    const {\n      userId,\n      username,\n      admin,\n      email\n    } = queryString.parse(location.search);\n    setId(userId);\n    setEmail(email);\n    setOldEmail(email);\n    setUsername(username);\n    setOldUsername(username);\n    setIsAdmin(admin);\n    setOldIsAdmin(admin);\n  }, []);\n\n  const getToken = async event => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"content-type\", \"application/x-www-form-urlencoded\");\n    myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n    var urlencoded = new URLSearchParams();\n    urlencoded.append(\"grant_type\", \"client_credentials\");\n    urlencoded.append(\"client_id\", \"PZPWHSA4HEWEX470bJCptAwLtbqAprTL\");\n    urlencoded.append(\"client_secret\", \"UsrbdXmXiATreBRyreIG2bWc5x2JB80RBsUYg34z1PWdm8_11K9VqD8VlBs3yrli\");\n    urlencoded.append(\"audience\", \"https://dev-3qxptrmu.us.auth0.com/api/v2/\");\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: urlencoded,\n      redirect: 'follow'\n    };\n    fetch(\"https://dev-3qxptrmu.us.auth0.com/oauth/token\", requestOptions).then(response => response.json()).then(result => {\n      let token = 'Bearer ' + result.access_token;\n\n      if (event === \"username\") {\n        if (_userName !== oldUserName) {\n          handleEditUsername(token);\n        }\n      }\n\n      if (event === \"admin\") {\n        if (isAdmin !== oldIsAdmin) {\n          handleEditAdmin(token);\n        }\n      }\n\n      if (event === \"delete\") {\n        handleDeleteUser(token);\n      }\n    }).catch(error => console.log('error', error));\n  };\n\n  const handleDeleteUser = _token => {\n    console.log(id);\n    var myHeaders = new Headers();\n    myHeaders.append(\"authorization\", _token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n    var requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n\n    let _url = \"https://dev-3qxptrmu.us.auth0.com/api/v2/users/auth0|\" + id;\n\n    fetch(_url, requestOptions).then(response => response.text()).then(result => console.log(result)).catch(error => console.log('error', error));\n    console.log(\"TERMINA ELIMINACION\");\n    history.push('/users');\n    history.push('/admin');\n    history.push('/users');\n  };\n\n  const handleGoBack = () => {\n    history.push('/users');\n  };\n\n  const handleEditUsername = _token => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"authorization\", _token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n    var raw = JSON.stringify({\n      \"user_metadata\": {\n        \"username\": _userName\n      }\n    });\n    var requestOptions = {\n      method: 'PATCH',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n\n    let _url = \"https://dev-3qxptrmu.us.auth0.com/api/v2/users/auth0|\" + id;\n\n    fetch(_url, requestOptions).then(response => response.text()).then(result => console.log(result)).catch(error => console.log('error', error));\n  };\n\n  const handleEditAdmin = _token => {\n    var myHeaders = new Headers();\n    myHeaders.append(\"authorization\", _token);\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n    var raw = JSON.stringify({\n      \"user_metadata\": {\n        \"is_admin\": isAdmin\n      }\n    });\n    var requestOptions = {\n      method: 'PATCH',\n      headers: myHeaders,\n      body: raw,\n      redirect: 'follow'\n    };\n\n    let _url = \"https://dev-3qxptrmu.us.auth0.com/api/v2/users/auth0|\" + id;\n\n    fetch(_url, requestOptions).then(response => response.text()).then(result => console.log(result)).catch(error => console.log('error', error));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Console\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Bar',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: event => getToken(\"delete\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 30\n    }\n  }, \"Delete User\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: 'Right',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 25\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleGoBack,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 30\n    }\n  }, \"Go Back\")))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, \"User ID: \", id, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 34\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 43\n    }\n  }), \"Email: \", _email, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 36\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }), \"Username: \", /*#__PURE__*/React.createElement(\"input\", {\n    className: \"Input\",\n    placeholder: _userName,\n    type: \"text\",\n    onChange: event => setUsername(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: event => getToken(\"username\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 150\n    }\n  }, \" Change\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 230\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 239\n    }\n  }), \"Admin: \", /*#__PURE__*/React.createElement(\"input\", {\n    className: \"Input\",\n    placeholder: isAdmin,\n    type: \"text\",\n    onChange: event => setIsAdmin(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: event => getToken(\"admin\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 144\n    }\n  }, \" Change\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 221\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 230\n    }\n  }))));\n};\n\nexport default Profile;","map":{"version":3,"sources":["/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Profile/Profile.jsx"],"names":["React","useState","useEffect","useHistory","queryString","url_display_chat","url_send_message","InfoBar","Input","Profile","location","history","_email","setEmail","_userName","setUsername","id","setId","isAdmin","setIsAdmin","oldEmail","setOldEmail","oldUserName","setOldUsername","oldIsAdmin","setOldIsAdmin","ENDPOINT","userId","username","admin","email","parse","search","getToken","event","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","body","redirect","fetch","then","response","json","result","token","access_token","handleEditUsername","handleEditAdmin","handleDeleteUser","catch","error","console","log","_token","_url","text","push","handleGoBack","raw","JSON","stringify","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport queryString from 'query-string';\nimport {url_display_chat, url_send_message} from \"./../Routes\";\n\nimport '../Chat/Chat.css'\nimport '../general.css'\n\nimport InfoBar from '../InfoBar/InfoBar';\nimport Input from '../Input/Input';\n\nconst Profile = ({ location }) => {\n    const history = useHistory();\n    const [_email, setEmail] = useState('');\n    const [_userName, setUsername] = useState('');\n    const [id, setId] = useState('');\n    const [isAdmin, setIsAdmin] = useState('');\n    const [oldEmail, setOldEmail] = useState('');\n    const [oldUserName, setOldUsername] = useState('');\n    const [oldIsAdmin, setOldIsAdmin] = useState('');\n    const ENDPOINT = 'ec2-18-219-25-136.us-east-2.compute.amazonaws.com:5000'\n    \n\n    useEffect(() => {\n        const {userId, username, admin, email} = queryString.parse(location.search);\n        setId(userId);\n        setEmail(email);\n        setOldEmail(email)\n        setUsername(username);\n        setOldUsername(username)\n        setIsAdmin(admin);\n        setOldIsAdmin(admin);\n    }, []);\n\n    const getToken = async (event) => {\n        var myHeaders = new Headers();\n        myHeaders.append(\"content-type\", \"application/x-www-form-urlencoded\");\n        myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n\n        var urlencoded = new URLSearchParams();\n        urlencoded.append(\"grant_type\", \"client_credentials\");\n        urlencoded.append(\"client_id\", \"PZPWHSA4HEWEX470bJCptAwLtbqAprTL\");\n        urlencoded.append(\"client_secret\", \"UsrbdXmXiATreBRyreIG2bWc5x2JB80RBsUYg34z1PWdm8_11K9VqD8VlBs3yrli\");\n        urlencoded.append(\"audience\", \"https://dev-3qxptrmu.us.auth0.com/api/v2/\");\n\n        var requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: urlencoded,\n        redirect: 'follow'\n        };\n        fetch(\"https://dev-3qxptrmu.us.auth0.com/oauth/token\", requestOptions)\n        .then(response => response.json())\n        .then((result) => {\n            let token = 'Bearer ' + result.access_token;\n            if (event === \"username\"){\n                if (_userName !== oldUserName){\n                    handleEditUsername(token);\n                }\n            }\n            if(event === \"admin\"){\n                if(isAdmin !== oldIsAdmin){\n                    handleEditAdmin(token);\n                } \n            }\n            if(event === \"delete\"){\n                handleDeleteUser(token);\n                \n            }\n            \n        })\n        .catch(error => console.log('error', error));\n        \n    }  \n\n    const handleDeleteUser = (_token) =>{\n        console.log(id);\n        var myHeaders = new Headers();\n        myHeaders.append(\"authorization\", _token);\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n        var requestOptions = {\n            method: 'DELETE',\n            headers: myHeaders,\n            redirect: 'follow'\n        };\n        let _url = \"https://dev-3qxptrmu.us.auth0.com/api/v2/users/auth0|\" + id\n        fetch(_url, requestOptions)\n        .then(response => response.text())\n        .then(result => console.log(result))\n        .catch(error => console.log('error', error));\n        console.log(\"TERMINA ELIMINACION\")\n        history.push('/users')\n        history.push('/admin')  \n        history.push('/users')    \n    }\n\n    const handleGoBack = () => {\n        history.push('/users')\n    }\n\n    const handleEditUsername = (_token) => {\n        var myHeaders = new Headers();\n        myHeaders.append(\"authorization\", _token);\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n        var raw = JSON.stringify({\"user_metadata\":{\"username\":_userName}});\n        var requestOptions = {\n            method: 'PATCH',\n            headers: myHeaders,\n            body: raw,\n            redirect: 'follow'\n        };\n        let _url = \"https://dev-3qxptrmu.us.auth0.com/api/v2/users/auth0|\" + id\n        fetch(_url, requestOptions)\n        .then(response => response.text())\n        .then(result => console.log(result))\n        .catch(error => console.log('error', error));\n    }\n\n\n    const handleEditAdmin = (_token) => {\n        var myHeaders = new Headers();\n        myHeaders.append(\"authorization\", _token);\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        myHeaders.append(\"Cookie\", \"__cfduid=d083a3aed605691cdf60e93ad5170b9291604625828; did=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso; did_compat=s%3Av0%3Ab86c6e50-1fce-11eb-bf84-9ffd0b850c2b.ednZdSdJix1z3kGNvZ5l4J%2BGcZg2aaEyJTM6v5YMrso\");\n        var raw = JSON.stringify({\"user_metadata\":{\"is_admin\": isAdmin}});\n        var requestOptions = {\n        method: 'PATCH',\n        headers: myHeaders,\n        body: raw,\n        redirect: 'follow'\n        };\n        let _url = \"https://dev-3qxptrmu.us.auth0.com/api/v2/users/auth0|\" + id\n        fetch(_url, requestOptions)\n        .then(response => response.text())\n        .then(result => console.log(result))\n        .catch(error => console.log('error', error));\n    }\n\n\n     \n\n    return (\n        <div className='Full'>\n            <div className='Console'>\n                <div className={'Bar'}>\n                    <div className={'Left'}>\n                        <div><button type=\"submit\" onClick={(event) => getToken(\"delete\")}>Delete User</button></div>\n                    </div>\n                    <div className={'Right'}>\n                        <h3> <button type=\"submit\" onClick={handleGoBack}>Go Back</button></h3>\n                    </div>\n                </div>\n                <br></br>\n                <br></br>\n                <div>\n                    User ID: {id}<br></br><br></br>\n                    Email: {_email}<br></br>\n                    <br></br>\n                    Username: <input className='Input' placeholder = {_userName} type =\"text\" onChange={(event) => setUsername(event.target.value)}/><button type=\"submit\" onClick={(event) => getToken(\"username\")}> Change</button><br></br><br></br>\n                    Admin: <input className='Input' placeholder = {isAdmin} type =\"text\" onChange={(event) => setIsAdmin(event.target.value)}/><button type=\"submit\" onClick={(event) => getToken(\"admin\")}> Change</button><br></br><br></br>\n                   \n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Test.js\";\nimport React, { useEffect, useState, useLayoutEffect } from 'react';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { url_auth } from \"./Routes\";\n\nconst Test = () => {\n  const {\n    user,\n    isAuthenticated,\n    isLoading,\n    logout,\n    getAccessTokenSilently\n  } = useAuth0();\n  const [loaded, setLoaded] = useState('');\n  const [userData, setUserData] = useState('');\n  const [userMetaData, setUserMetadata] = useState('');\n  useEffect(() => {\n    if (isLoading) {} else if (!loaded) {\n      setLoaded(true);\n\n      const getUserMetadata = async () => {\n        const domain = \"dev-3qxptrmu.us.auth0.com\";\n\n        try {\n          const accessToken = await getAccessTokenSilently({\n            audience: `https://${domain}/api/v2/`,\n            scope: \"read:current_user\"\n          });\n          const userDetailsByIdUrl = `https://${domain}/api/v2/users/${user.sub}`;\n          const metadataResponse = await fetch(userDetailsByIdUrl, {\n            headers: {\n              Authorization: `Bearer ${accessToken}`\n            }\n          });\n          const {\n            user_metadata\n          } = await metadataResponse.json();\n          setUserMetadata(user_metadata);\n        } catch (e) {\n          console.log(\"ERROR:\", e.message);\n        }\n      };\n\n      getUserMetadata();\n      window.localStorage.setItem('userId', userMetaData.id);\n    }\n  });\n  return isAuthenticated && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 15\n    }\n  }, isLoading), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 15\n    }\n  }, user.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, user.email), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }, \"ID: \", userMetaData.id), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: () => logout({\n      returnTo: url_auth\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }, \" Log Out\"));\n};\n\nexport default Test;","map":{"version":3,"sources":["/home/javiera/Documents/UNIVERSIDAD/2020-2/Arquitectura de Software/G16/iic2173-proyecto-semestral-grupo-16v2-frontend/src/components/Test.js"],"names":["React","useEffect","useState","useLayoutEffect","useAuth0","url_auth","Test","user","isAuthenticated","isLoading","logout","getAccessTokenSilently","loaded","setLoaded","userData","setUserData","userMetaData","setUserMetadata","getUserMetadata","domain","accessToken","audience","scope","userDetailsByIdUrl","sub","metadataResponse","fetch","headers","Authorization","user_metadata","json","e","console","log","message","window","localStorage","setItem","id","name","email","returnTo"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,eAArC,QAA4D,OAA5D;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,QAAT,QAAyB,UAAzB;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAEf,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,eAAR;AAAyBC,IAAAA,SAAzB;AAAoCC,IAAAA,MAApC;AAA4CC,IAAAA;AAA5C,MAAuEP,QAAQ,EAArF;AACA,QAAM,CAACQ,MAAD,EAASC,SAAT,IAAsBX,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACY,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACc,YAAD,EAAeC,eAAf,IAAkCf,QAAQ,CAAC,EAAD,CAAhD;AAEAD,EAAAA,SAAS,CAAE,MAAM;AACf,QAAIQ,SAAJ,EAAc,CACb,CADD,MACO,IAAI,CAACG,MAAL,EAAY;AACjBC,MAAAA,SAAS,CAAC,IAAD,CAAT;;AACA,YAAMK,eAAe,GAAG,YAAY;AAClC,cAAMC,MAAM,GAAG,2BAAf;;AACA,YAAI;AACF,gBAAMC,WAAW,GAAG,MAAMT,sBAAsB,CAAC;AAC/CU,YAAAA,QAAQ,EAAG,WAAUF,MAAO,UADmB;AAE/CG,YAAAA,KAAK,EAAE;AAFwC,WAAD,CAAhD;AAKA,gBAAMC,kBAAkB,GAAI,WAAUJ,MAAO,iBAAgBZ,IAAI,CAACiB,GAAI,EAAtE;AAEA,gBAAMC,gBAAgB,GAAG,MAAMC,KAAK,CAACH,kBAAD,EAAqB;AACvDI,YAAAA,OAAO,EAAE;AACPC,cAAAA,aAAa,EAAG,UAASR,WAAY;AAD9B;AAD8C,WAArB,CAApC;AAMA,gBAAM;AAAES,YAAAA;AAAF,cAAoB,MAAMJ,gBAAgB,CAACK,IAAjB,EAAhC;AAEAb,UAAAA,eAAe,CAACY,aAAD,CAAf;AACD,SAjBD,CAiBE,OAAOE,CAAP,EAAU;AACVC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,CAAC,CAACG,OAAxB;AACD;AACF,OAtBD;;AAuBAhB,MAAAA,eAAe;AACfiB,MAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAsCrB,YAAY,CAACsB,EAAnD;AACD;AACF,GA9BQ,CAAT;AAgCA,SACI9B,eAAe,iBACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKC,SAAL,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,IAAI,CAACgC,IAAV,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIhC,IAAI,CAACiC,KAAT,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAASxB,YAAY,CAACsB,EAAtB,CAJF,eAKE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAE,MAAM5B,MAAM,CAAC;AAAE+B,MAAAA,QAAQ,EAAEpC;AAAZ,KAAD,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,CAFR;AAaH,CApDD;;AAsDA,eAAeC,IAAf","sourcesContent":["import React, { useEffect, useState, useLayoutEffect } from 'react';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport { url_auth } from \"./Routes\";\n\nconst Test = () => {\n\n    const { user, isAuthenticated, isLoading, logout, getAccessTokenSilently } = useAuth0();\n    const [loaded, setLoaded] = useState('');\n    const [userData, setUserData] = useState('');\n    const [userMetaData, setUserMetadata] = useState('');\n    \n    useEffect (() => {\n      if (isLoading){\n      } else if (!loaded){\n        setLoaded(true);\n        const getUserMetadata = async () => {\n          const domain = \"dev-3qxptrmu.us.auth0.com\";\n          try {\n            const accessToken = await getAccessTokenSilently({\n              audience: `https://${domain}/api/v2/`,\n              scope: \"read:current_user\",\n            });\n            \n            const userDetailsByIdUrl = `https://${domain}/api/v2/users/${user.sub}`;\n      \n            const metadataResponse = await fetch(userDetailsByIdUrl, {\n              headers: {\n                Authorization: `Bearer ${accessToken}`,\n              },\n            });\n      \n            const { user_metadata } = await metadataResponse.json();\n      \n            setUserMetadata(user_metadata);\n          } catch (e) {\n            console.log(\"ERROR:\", e.message);\n          }\n        };\n        getUserMetadata();\n        window.localStorage.setItem('userId', userMetaData.id);\n      }\n    });\n\n    return (\n        isAuthenticated && (\n            <div >\n              <p >{isLoading}</p>\n              <h2>{user.name}</h2>\n              <p>{user.email}</p>\n              <p >ID: {userMetaData.id}</p>\n              <button type=\"submit\" onClick={() => logout({ returnTo: url_auth })}> Log Out</button>\n            </div>\n          )\n    )\n\n\n}\n\nexport default Test;"]},"metadata":{},"sourceType":"module"}